/** winperf.d

Converted from 'winperf.h'.

Version: V7.1
Authors: Koji Kishita
*/
module c.windows.winperf;


import c.windows.windef;
import c.windows.winbase;


align(8){

enum PERF_DATA_VERSION = 1;
enum PERF_DATA_REVISION = 1;

struct PERF_DATA_BLOCK {
	WCHAR[4] Signature;
	DWORD LittleEndian;
	DWORD Version;
	DWORD Revision;
	DWORD TotalByteLength;
	DWORD HeaderLength;
	DWORD NumObjectTypes;
	LONG DefaultObject;
	SYSTEMTIME SystemTime;
	LARGE_INTEGER PerfTime;
	LARGE_INTEGER PerfFreq;
	LARGE_INTEGER PerfTime100nSec;
	DWORD SystemNameLength;
	DWORD SystemNameOffset;
}
alias PERF_DATA_BLOCK* PPERF_DATA_BLOCK;

struct PERF_OBJECT_TYPE {
	DWORD TotalByteLength;
	DWORD DefinitionLength;
	DWORD HeaderLength;
	DWORD ObjectNameTitleIndex;
	version(Win64)
		DWORD ObjectNameTitle;
	else
		LPWSTR ObjectNameTitle;
	DWORD ObjectHelpTitleIndex;
	version(Win64)
		DWORD ObjectHelpTitle;
	else
		LPWSTR ObjectHelpTitle;
	DWORD DetailLevel;
	DWORD NumCounters;
	LONG DefaultCounter;
	LONG NumInstances;
	DWORD CodePage;
	LARGE_INTEGER PerfTime;
	LARGE_INTEGER PerfFreq;
}
alias PERF_OBJECT_TYPE* PPERF_OBJECT_TYPE;

enum {
	PERF_NO_INSTANCES = -1,

	PERF_SIZE_DWORD        = 0x00000000,
	PERF_SIZE_LARGE        = 0x00000100,
	PERF_SIZE_ZERO         = 0x00000200,
	PERF_SIZE_VARIABLE_LEN = 0x00000300,

	PERF_TYPE_NUMBER  = 0x00000000,
	PERF_TYPE_COUNTER = 0x00000400,
	PERF_TYPE_TEXT    = 0x00000800,
	PERF_TYPE_ZERO    = 0x00000C00,

	PERF_NUMBER_HEX      = 0x00000000,
	PERF_NUMBER_DECIMAL  = 0x00010000,
	PERF_NUMBER_DEC_1000 = 0x00020000,

	PERF_COUNTER_VALUE     = 0x00000000,
	PERF_COUNTER_RATE      = 0x00010000,
	PERF_COUNTER_FRACTION  = 0x00020000,
	PERF_COUNTER_BASE      = 0x00030000,
	PERF_COUNTER_ELAPSED   = 0x00040000,
	PERF_COUNTER_QUEUELEN  = 0x00050000,
	PERF_COUNTER_HISTOGRAM = 0x00060000,
	PERF_COUNTER_PRECISION = 0x00070000,

	PERF_TEXT_UNICODE = 0x00000000,
	PERF_TEXT_ASCII   = 0x00010000,

	PERF_TIMER_TICK   = 0x00000000,
	PERF_TIMER_100NS  = 0x00100000,
	PERF_OBJECT_TIMER = 0x00200000,

	PERF_DELTA_COUNTER   = 0x00400000,
	PERF_DELTA_BASE      = 0x00800000,
	PERF_INVERSE_COUNTER = 0x01000000,
	PERF_MULTI_COUNTER   = 0x02000000,

	PERF_DISPLAY_NO_SUFFIX = 0x00000000,
	PERF_DISPLAY_PER_SEC   = 0x10000000,
	PERF_DISPLAY_PERCENT   = 0x20000000,
	PERF_DISPLAY_SECONDS   = 0x30000000,
	PERF_DISPLAY_NOSHOW    = 0x40000000,

	PERF_COUNTER_COUNTER                = PERF_SIZE_DWORD | PERF_TYPE_COUNTER | PERF_COUNTER_RATE | PERF_TIMER_TICK | PERF_DELTA_COUNTER | PERF_DISPLAY_PER_SEC,
	PERF_COUNTER_TIMER                  = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_RATE | PERF_TIMER_TICK | PERF_DELTA_COUNTER | PERF_DISPLAY_PERCENT,
	PERF_COUNTER_QUEUELEN_TYPE          = PERF_SIZE_DWORD | PERF_TYPE_COUNTER | PERF_COUNTER_QUEUELEN | PERF_TIMER_TICK | PERF_DELTA_COUNTER | PERF_DISPLAY_NO_SUFFIX,
	PERF_COUNTER_LARGE_QUEUELEN_TYPE    = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_QUEUELEN | PERF_TIMER_TICK | PERF_DELTA_COUNTER | PERF_DISPLAY_NO_SUFFIX,
	PERF_COUNTER_100NS_QUEUELEN_TYPE    = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_QUEUELEN | PERF_TIMER_100NS | PERF_DELTA_COUNTER | PERF_DISPLAY_NO_SUFFIX,
	PERF_COUNTER_OBJ_TIME_QUEUELEN_TYPE = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_QUEUELEN | PERF_OBJECT_TIMER | PERF_DELTA_COUNTER | PERF_DISPLAY_NO_SUFFIX,
	PERF_COUNTER_BULK_COUNT             = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_RATE | PERF_TIMER_TICK | PERF_DELTA_COUNTER | PERF_DISPLAY_PER_SEC,
	PERF_COUNTER_TEXT                   = PERF_SIZE_VARIABLE_LEN | PERF_TYPE_TEXT | PERF_TEXT_UNICODE | PERF_DISPLAY_NO_SUFFIX,
	PERF_COUNTER_RAWCOUNT               = PERF_SIZE_DWORD | PERF_TYPE_NUMBER | PERF_NUMBER_DECIMAL | PERF_DISPLAY_NO_SUFFIX,
	PERF_COUNTER_LARGE_RAWCOUNT         = PERF_SIZE_LARGE | PERF_TYPE_NUMBER | PERF_NUMBER_DECIMAL | PERF_DISPLAY_NO_SUFFIX,
	PERF_COUNTER_RAWCOUNT_HEX           = PERF_SIZE_DWORD | PERF_TYPE_NUMBER | PERF_NUMBER_HEX | PERF_DISPLAY_NO_SUFFIX,
	PERF_COUNTER_LARGE_RAWCOUNT_HEX     = PERF_SIZE_LARGE | PERF_TYPE_NUMBER | PERF_NUMBER_HEX | PERF_DISPLAY_NO_SUFFIX,
	PERF_SAMPLE_FRACTION                = PERF_SIZE_DWORD | PERF_TYPE_COUNTER | PERF_COUNTER_FRACTION | PERF_DELTA_COUNTER | PERF_DELTA_BASE | PERF_DISPLAY_PERCENT,
	PERF_SAMPLE_COUNTER                 = PERF_SIZE_DWORD | PERF_TYPE_COUNTER | PERF_COUNTER_RATE | PERF_TIMER_TICK | PERF_DELTA_COUNTER | PERF_DISPLAY_NO_SUFFIX,
	PERF_COUNTER_NODATA                 = PERF_SIZE_ZERO | PERF_DISPLAY_NOSHOW,
	PERF_COUNTER_TIMER_INV              = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_RATE | PERF_TIMER_TICK | PERF_DELTA_COUNTER | PERF_INVERSE_COUNTER | PERF_DISPLAY_PERCENT,
	PERF_SAMPLE_BASE                    = PERF_SIZE_DWORD | PERF_TYPE_COUNTER | PERF_COUNTER_BASE | PERF_DISPLAY_NOSHOW | 0x00000001,
	PERF_AVERAGE_TIMER                  = PERF_SIZE_DWORD | PERF_TYPE_COUNTER | PERF_COUNTER_FRACTION | PERF_DISPLAY_SECONDS,
	PERF_AVERAGE_BASE                   = PERF_SIZE_DWORD | PERF_TYPE_COUNTER | PERF_COUNTER_BASE | PERF_DISPLAY_NOSHOW | 0x00000002,
	PERF_AVERAGE_BULK                   = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_FRACTION | PERF_DISPLAY_NOSHOW,
	PERF_OBJ_TIME_TIMER                 = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_RATE | PERF_OBJECT_TIMER | PERF_DELTA_COUNTER | PERF_DISPLAY_PERCENT,
	PERF_100NSEC_TIMER                  = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_RATE | PERF_TIMER_100NS | PERF_DELTA_COUNTER | PERF_DISPLAY_PERCENT,
	PERF_100NSEC_TIMER_INV              = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_RATE | PERF_TIMER_100NS | PERF_DELTA_COUNTER | PERF_INVERSE_COUNTER | PERF_DISPLAY_PERCENT,
	PERF_COUNTER_MULTI_TIMER            = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_RATE | PERF_DELTA_COUNTER | PERF_TIMER_TICK | PERF_MULTI_COUNTER | PERF_DISPLAY_PERCENT,
	PERF_COUNTER_MULTI_TIMER_INV        = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_RATE | PERF_DELTA_COUNTER | PERF_MULTI_COUNTER | PERF_TIMER_TICK | PERF_INVERSE_COUNTER | PERF_DISPLAY_PERCENT,
	PERF_COUNTER_MULTI_BASE             = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_BASE | PERF_MULTI_COUNTER | PERF_DISPLAY_NOSHOW,
	PERF_100NSEC_MULTI_TIMER            = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_DELTA_COUNTER | PERF_COUNTER_RATE | PERF_TIMER_100NS | PERF_MULTI_COUNTER | PERF_DISPLAY_PERCENT,
	PERF_100NSEC_MULTI_TIMER_INV        = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_DELTA_COUNTER | PERF_COUNTER_RATE | PERF_TIMER_100NS | PERF_MULTI_COUNTER | PERF_INVERSE_COUNTER | PERF_DISPLAY_PERCENT,
	PERF_RAW_FRACTION                   = PERF_SIZE_DWORD | PERF_TYPE_COUNTER | PERF_COUNTER_FRACTION | PERF_DISPLAY_PERCENT,
	PERF_LARGE_RAW_FRACTION             = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_FRACTION | PERF_DISPLAY_PERCENT,
	PERF_RAW_BASE                       = PERF_SIZE_DWORD | PERF_TYPE_COUNTER | PERF_COUNTER_BASE | PERF_DISPLAY_NOSHOW | 0x00000003,
	PERF_LARGE_RAW_BASE                 = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_BASE | PERF_DISPLAY_NOSHOW,
	PERF_ELAPSED_TIME                   = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_ELAPSED | PERF_OBJECT_TIMER | PERF_DISPLAY_SECONDS,
	PERF_COUNTER_HISTOGRAM_TYPE         = 0x80000000,
	PERF_COUNTER_DELTA                  = PERF_SIZE_DWORD | PERF_TYPE_COUNTER | PERF_COUNTER_VALUE | PERF_DELTA_COUNTER | PERF_DISPLAY_NO_SUFFIX,
	PERF_COUNTER_LARGE_DELTA            = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_VALUE | PERF_DELTA_COUNTER | PERF_DISPLAY_NO_SUFFIX,
	PERF_PRECISION_SYSTEM_TIMER         = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_PRECISION |  PERF_TIMER_TICK | PERF_DELTA_COUNTER | PERF_DISPLAY_PERCENT ,
	PERF_PRECISION_100NS_TIMER          = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_PRECISION |  PERF_TIMER_100NS | PERF_DELTA_COUNTER | PERF_DISPLAY_PERCENT ,
	PERF_PRECISION_OBJECT_TIMER         = PERF_SIZE_LARGE | PERF_TYPE_COUNTER | PERF_COUNTER_PRECISION |  PERF_OBJECT_TIMER | PERF_DELTA_COUNTER | PERF_DISPLAY_PERCENT ,
	PERF_PRECISION_TIMESTAMP            = PERF_LARGE_RAW_BASE,

	PERF_DETAIL_NOVICE   = 100,
	PERF_DETAIL_ADVANCED = 200,
	PERF_DETAIL_EXPERT   = 300,
	PERF_DETAIL_WIZARD   = 400,
}

struct PERF_COUNTER_DEFINITION {
	DWORD ByteLength;
	DWORD CounterNameTitleIndex;
	version(Win64)
		DWORD CounterNameTitle;
	else
		LPWSTR CounterNameTitle;
	DWORD CounterHelpTitleIndex;
	version(Win64)
		DWORD CounterHelpTitle;
	else
		LPWSTR CounterHelpTitle;
	LONG DefaultScale;
	DWORD DetailLevel;
	DWORD CounterType;
	DWORD CounterSize;
	DWORD CounterOffset;
}
alias PERF_COUNTER_DEFINITION* PPERF_COUNTER_DEFINITION;

enum PERF_NO_UNIQUE_ID = -1;

struct PERF_INSTANCE_DEFINITION {
	DWORD ByteLength;
	DWORD ParentObjectTitleIndex;
	DWORD ParentObjectInstance;
	LONG UniqueID;
	DWORD NameOffset;
	DWORD NameLength;
}
alias PERF_INSTANCE_DEFINITION* PPERF_INSTANCE_DEFINITION;

struct PERF_COUNTER_BLOCK {
	DWORD ByteLength;
}
alias PERF_COUNTER_BLOCK* PPERF_COUNTER_BLOCK;

enum : LONG {
	PERF_QUERY_OBJECTS = 0x80000000,
	PERF_QUERY_GLOBAL  = 0x80000001,
	PERF_QUERY_COSTLY  = 0x80000002,
}

alias extern(Windows) DWORD function(LPWSTR) PM_OPEN_PROC;
alias extern(Windows) DWORD function(LPWSTR, LPVOID*, LPDWORD, LPDWORD) PM_COLLECT_PROC;
alias extern(Windows) DWORD function() PM_CLOSE_PROC;
alias extern(Windows) DWORD function(LPDWORD, LPVOID*, LPDWORD, LPDWORD) PM_QUERY_PROC;

//(_WIN32_WINDOWS >= 0x0501 || _WIN32_WINNT >= 0x0501 || (defined(NTDDI_VERSION) && NTDDI_VERSION >= NTDDI_WINXP))
	enum {
		MAX_PERF_OBJECTS_IN_QUERY_FUNCTION = 64,

		WINPERF_LOG_NONE    = 0,
		WINPERF_LOG_USER    = 1,
		WINPERF_LOG_DEBUG   = 2,
		WINPERF_LOG_VERBOSE = 3,
	}
//else
	// MAX_PERF_OBJECTS_IN_QUERY_FUNCTION (8L)

}// align(8)
